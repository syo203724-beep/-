<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤©å‹•èª¬ã¨åœ°å‹•èª¬ - ã‚·ãƒãƒãƒ†ã‚£ãƒƒã‚¯ ãƒŠãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</title>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Noto+Sans+JP:wght@300;400;500;700&family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        :root {
            --gold: #d4af37;
            --gold-light: #f4d03f;
            --deep-space: #0a0a12;
            --text-white: #f0f0f0;
            --danger-red: #c62828;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Noto Sans JP', sans-serif;
            background: #000;
            color: var(--text-white);
        }

        /* Cinema Container */
        #cinema {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
        }

        /* Scene System */
        .scene {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            visibility: hidden;
            transition: opacity 1.5s ease, visibility 1.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .scene.active {
            opacity: 1;
            visibility: visible;
        }

        .scene.fade-out {
            opacity: 0;
        }

        /* Background Images with Ken Burns Effect */
        .scene-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            transform: scale(1);
            transition: transform 12s ease-out;
            filter: brightness(0.5);
        }

        .scene.active .scene-bg {
            transform: scale(1.15);
        }

        .scene-bg::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom,
                rgba(0,0,0,0.3) 0%,
                rgba(0,0,0,0.1) 50%,
                rgba(0,0,0,0.7) 100%);
        }

        /* Scene Content */
        .scene-content {
            position: relative;
            z-index: 10;
            max-width: 1000px;
            padding: 40px;
            text-align: center;
            transform: translateY(30px);
            opacity: 0;
            transition: transform 1s ease 0.5s, opacity 1s ease 0.5s;
        }

        .scene.active .scene-content {
            transform: translateY(0);
            opacity: 1;
        }

        .scene-title {
            font-family: 'Cinzel', 'Noto Serif JP', serif;
            font-size: clamp(2.5rem, 6vw, 5rem);
            font-weight: 700;
            color: var(--gold);
            margin-bottom: 30px;
            text-shadow: 0 0 60px rgba(212, 175, 55, 0.5);
            letter-spacing: 0.1em;
        }

        .scene-subtitle {
            font-family: 'Noto Serif JP', serif;
            font-size: clamp(1.2rem, 3vw, 2rem);
            color: var(--text-white);
            opacity: 0.9;
            line-height: 1.8;
            text-shadow: 0 2px 20px rgba(0,0,0,0.8);
        }

        /* Quote Style */
        .scene-quote {
            font-family: 'Noto Serif JP', serif;
            font-style: italic;
            font-size: clamp(1.5rem, 4vw, 2.5rem);
            color: var(--gold-light);
            line-height: 2;
            padding: 40px;
            border-left: 4px solid var(--gold);
            border-right: 4px solid var(--gold);
            background: rgba(0,0,0,0.4);
            border-radius: 8px;
        }

        /* Character Cards */
        .character-cards {
            display: flex;
            gap: 30px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 40px;
        }

        .character-card {
            background: rgba(0,0,0,0.6);
            border: 1px solid var(--gold);
            border-radius: 16px;
            padding: 25px;
            width: 280px;
            backdrop-filter: blur(10px);
            transform: translateY(50px);
            opacity: 0;
            animation: fadeInUp 0.8s ease forwards;
        }

        .character-card:nth-child(1) { animation-delay: 0.3s; }
        .character-card:nth-child(2) { animation-delay: 0.6s; }
        .character-card:nth-child(3) { animation-delay: 0.9s; }

        @keyframes fadeInUp {
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .character-card img {
            width: 100%;
            height: 180px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .character-card h3 {
            font-family: 'Cinzel', serif;
            color: var(--gold);
            margin-bottom: 8px;
        }

        .character-card p {
            font-size: 0.9rem;
            color: rgba(255,255,255,0.8);
        }

        /* Warning/Danger Scene */
        .scene.danger .scene-bg::after {
            background: linear-gradient(to bottom,
                rgba(80,0,0,0.4) 0%,
                rgba(0,0,0,0.2) 50%,
                rgba(80,0,0,0.6) 100%);
        }

        .danger-text {
            color: var(--danger-red);
            font-weight: 700;
        }

        /* Subtitle (Narration Text) */
        #subtitle-container {
            position: fixed;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 100;
            width: 90%;
            max-width: 900px;
            text-align: center;
        }

        #subtitle {
            display: inline-block;
            background: rgba(0,0,0,0.85);
            padding: 18px 35px;
            border-radius: 8px;
            font-size: clamp(1rem, 2.5vw, 1.4rem);
            line-height: 1.8;
            color: var(--text-white);
            font-family: 'Noto Sans JP', sans-serif;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            border: 1px solid rgba(212,175,55,0.3);
            opacity: 0;
            transition: opacity 0.3s;
        }

        #subtitle.show {
            opacity: 1;
        }

        /* Video Controls */
        #controls {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 70px;
            background: linear-gradient(to top, rgba(0,0,0,0.95), rgba(0,0,0,0.7));
            display: flex;
            align-items: center;
            padding: 0 30px;
            gap: 20px;
            z-index: 200;
        }

        .control-btn {
            width: 50px;
            height: 50px;
            border: none;
            background: rgba(212,175,55,0.2);
            color: var(--gold);
            font-size: 1.5rem;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            background: var(--gold);
            color: #000;
            transform: scale(1.1);
        }

        #progress-container {
            flex: 1;
            height: 6px;
            background: rgba(255,255,255,0.2);
            border-radius: 3px;
            cursor: pointer;
            position: relative;
        }

        #progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--gold), var(--gold-light));
            border-radius: 3px;
            width: 0%;
            transition: width 0.3s;
        }

        #time-display {
            color: var(--text-white);
            font-family: monospace;
            font-size: 0.9rem;
            min-width: 100px;
            text-align: right;
        }

        #scene-indicator {
            color: var(--gold);
            font-size: 0.9rem;
            min-width: 80px;
        }

        /* Volume Control */
        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #volume-slider {
            width: 80px;
            height: 4px;
            -webkit-appearance: none;
            background: rgba(255,255,255,0.2);
            border-radius: 2px;
            outline: none;
        }

        #volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 14px;
            height: 14px;
            background: var(--gold);
            border-radius: 50%;
            cursor: pointer;
        }

        /* Start Screen */
        #start-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0a0a1a, #1a1a2e);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 500;
            transition: opacity 1s, visibility 1s;
        }

        #start-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        #start-screen h1 {
            font-family: 'Cinzel', serif;
            font-size: clamp(2rem, 6vw, 4rem);
            color: var(--gold);
            margin-bottom: 20px;
            text-shadow: 0 0 40px rgba(212,175,55,0.5);
        }

        #start-screen p {
            color: var(--text-white);
            opacity: 0.8;
            margin-bottom: 40px;
            font-size: 1.2rem;
        }

        #start-btn {
            padding: 18px 50px;
            font-size: 1.2rem;
            font-family: 'Cinzel', serif;
            background: linear-gradient(135deg, var(--gold), var(--gold-light));
            color: #000;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 0 30px rgba(212,175,55,0.3);
        }

        #start-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 50px rgba(212,175,55,0.5);
        }

        .audio-mode-select {
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .audio-mode-select label {
            color: var(--text-white);
            opacity: 0.7;
        }

        .mode-buttons {
            display: flex;
            gap: 15px;
        }

        .mode-btn {
            padding: 12px 25px;
            font-size: 1rem;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--gold);
            color: var(--text-white);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .mode-btn:hover, .mode-btn.active {
            background: var(--gold);
            color: #000;
        }

        .audio-status {
            margin-top: 20px;
            padding: 15px 25px;
            background: rgba(0,0,0,0.5);
            border-radius: 8px;
            font-size: 0.9rem;
            color: rgba(255,255,255,0.7);
            max-width: 500px;
            text-align: center;
        }

        .audio-status.success {
            border: 1px solid #4caf50;
            color: #4caf50;
        }

        .audio-status.warning {
            border: 1px solid #ff9800;
            color: #ff9800;
        }

        /* Particle Effects */
        .particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 5;
            pointer-events: none;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--gold);
            border-radius: 50%;
            opacity: 0;
            animation: float 8s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% {
                transform: translateY(-100vh) rotate(720deg);
                opacity: 0;
            }
        }

        /* Cinematic Bars */
        .cinema-bars {
            position: fixed;
            left: 0;
            right: 0;
            height: 60px;
            background: #000;
            z-index: 50;
            pointer-events: none;
        }

        .cinema-bars.top { top: 0; }
        .cinema-bars.bottom { bottom: 70px; }

        /* Scene Transitions */
        .transition-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 400;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.8s;
        }

        .transition-overlay.active {
            opacity: 1;
        }

        /* Loading indicator */
        .loading-audio {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--gold);
            font-size: 1.2rem;
            z-index: 600;
            display: none;
        }

        .loading-audio.show {
            display: block;
        }

        /* Responsive */
        @media (max-width: 768px) {
            #controls {
                padding: 0 15px;
                gap: 10px;
            }

            .control-btn {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }

            #volume-slider {
                width: 50px;
            }

            .cinema-bars {
                height: 30px;
            }

            .character-cards {
                flex-direction: column;
                align-items: center;
            }

            .character-card {
                width: 90%;
                max-width: 300px;
            }

            .mode-buttons {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Loading -->
    <div class="loading-audio" id="loading-audio">éŸ³å£°ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>

    <!-- Start Screen -->
    <div id="start-screen">
        <h1>å¤©å‹•èª¬ã¨åœ°å‹•èª¬</h1>
        <p>â€• éå¸¸è­˜ã¯ã€ã„ã¤ã‹å¸¸è­˜ã«ãªã‚‹ â€•</p>
        <button id="start-btn">â–¶ å†ç”Ÿé–‹å§‹</button>
        <div class="audio-mode-select">
            <label>éŸ³å£°ãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠ</label>
            <div class="mode-buttons">
                <button class="mode-btn active" data-mode="file">éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ« (æ¨å¥¨)</button>
                <button class="mode-btn" data-mode="tts">ãƒ–ãƒ©ã‚¦ã‚¶TTS</button>
                <button class="mode-btn" data-mode="silent">å­—å¹•ã®ã¿</button>
            </div>
            <div class="audio-status" id="audio-status">
                éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªä¸­...
            </div>
        </div>
    </div>

    <!-- Transition Overlay -->
    <div class="transition-overlay" id="transition"></div>

    <!-- Cinema Container -->
    <div id="cinema">
        <!-- Cinematic Bars -->
        <div class="cinema-bars top"></div>
        <div class="cinema-bars bottom"></div>

        <!-- Scene 0: Opening -->
        <div class="scene active" id="scene-0">
            <div class="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=1920&q=80')"></div>
            <div class="particles" id="particles-0"></div>
            <div class="scene-content">
                <h1 class="scene-title">å¤©å‹•èª¬ã¨åœ°å‹•èª¬</h1>
                <p class="scene-subtitle">éå¸¸è­˜ã¯ã€ã„ã¤ã‹å¸¸è­˜ã«ãªã‚‹</p>
            </div>
        </div>

        <!-- Scene 1: Introduction -->
        <div class="scene" id="scene-1">
            <div class="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1516339901601-2e1b62dc0c45?w=1920&q=80')"></div>
            <div class="scene-content">
                <h2 class="scene-title">ã¯ã˜ã‚ã«</h2>
                <p class="scene-subtitle">
                    çªç„¶ã§ã™ãŒã€ã‚ãªãŸã¯ã€Œãƒã€‚ã€ã¨ã„ã†æ¼«ç”»ã‚’çŸ¥ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ<br><br>
                    ã€Œãƒã€‚ã€ã¯å¼¾åœ§ã•ã‚ŒãªãŒã‚‰ã‚‚åœ°å‹•èª¬ã‚’ä¿¡ã˜ã¦<br>
                    è¨¼æ˜ã—ã‚ˆã†ã¨ã—ãŸäººãŸã¡ã®ç‰©èªã§ã™ã€‚
                </p>
            </div>
        </div>

        <!-- Scene 2: Geocentric Model -->
        <div class="scene" id="scene-2">
            <div class="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1451187580459-43490279c0fa?w=1920&q=80')"></div>
            <div class="scene-content">
                <h2 class="scene-title">å¤©å‹•èª¬ã¨ã¯</h2>
                <p class="scene-subtitle">
                    åœ°çƒã‚’ä¸­å¿ƒã«ã€å¤ªé™½ã‚„æ˜Ÿã€…ãŒå›ã£ã¦ã„ã‚‹ã¨ã„ã†è€ƒãˆã€‚<br><br>
                    ç›®ã§æ„Ÿã˜ãŸã‚‚ã®ã‚’ä¿¡ã˜ã‚‹ã¨ã€ã“ã®èª¬ã«è¡Œãç€ãã¾ã—ãŸã€‚<br>
                    ãã—ã¦é•·ã„é–“ã€æ¨©åŠ›ã‚„å®—æ•™ã«ã‚ˆã£ã¦<br>
                    ã€Œæ­£ã—ã„ã€ã¨ã•ã‚Œã¦ããŸã®ã§ã™ã€‚
                </p>
            </div>
        </div>

        <!-- Scene 3: Why people believed -->
        <div class="scene" id="scene-3">
            <div class="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1507400492013-162706c8c05e?w=1920&q=80')"></div>
            <div class="scene-content">
                <h2 class="scene-title">ãªãœä¿¡ã˜ã‚‰ã‚ŒãŸã®ã‹</h2>
                <p class="scene-subtitle">
                    åœ°é¢ã¯å‹•ã„ã¦ã„ã‚‹ã‚ˆã†ã«æ„Ÿã˜ãªã„ã€‚<br>
                    å¤ªé™½ã¯æ¯æ—¥ã€æ±ã‹ã‚‰æ˜‡ã‚Šè¥¿ã«æ²ˆã‚€ã€‚<br>
                    æ˜Ÿã¯æ¯æ™©ã€è¦å‰‡æ­£ã—ãå‹•ã„ã¦ã„ã‚‹ã€‚<br><br>
                    è¦‹ãŸã¾ã¾ã‚’ä¿¡ã˜ã‚Œã°ã€å¤©å‹•èª¬ã¯è‡ªç„¶ãªçµè«–ã§ã—ãŸã€‚
                </p>
            </div>
        </div>

        <!-- Scene 4: Heliocentric Model Introduction -->
        <div class="scene" id="scene-4">
            <div class="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1614642264762-d0a3b8bf3700?w=1920&q=80')"></div>
            <div class="scene-content">
                <h2 class="scene-title">åœ°å‹•èª¬ã®ç™»å ´</h2>
                <p class="scene-subtitle">
                    ã€Œå®Ÿã¯åœ°çƒãŒå‹•ã„ã¦ã„ã‚‹ã®ã§ã¯ãªã„ã‹ã€<br><br>
                    ãã†è€ƒãˆãŸäººãŸã¡ãŒç¾ã‚Œã¾ã—ãŸã€‚<br>
                    ã“ã‚ŒãŒåœ°å‹•èª¬ã§ã™ã€‚
                </p>
            </div>
        </div>

        <!-- Scene 5: Heliocentric Evidence -->
        <div class="scene" id="scene-5">
            <div class="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1446776811953-b23d57bd21aa?w=1920&q=80')"></div>
            <div class="scene-content">
                <h2 class="scene-title">è«–ç†çš„ãªæ ¹æ‹ </h2>
                <p class="scene-subtitle">
                    åœ°çƒãŒè‡ªè»¢ã™ã‚Œã°ã€æ˜¼ã¨å¤œãŒèª¬æ˜ã§ãã‚‹ã€‚<br>
                    åœ°çƒãŒå…¬è»¢ã™ã‚Œã°ã€å­£ç¯€ã®å¤‰åŒ–ã‚‚èª¬æ˜ã§ãã‚‹ã€‚<br><br>
                    ã—ã‹ã—ã“ã®è€ƒãˆã¯å½“æ™‚ã€<br>
                    <span class="danger-text">ã¨ã‚“ã§ã‚‚ãªã„éå¸¸è­˜</span>ã§ã—ãŸã€‚
                </p>
            </div>
        </div>

        <!-- Scene 6: Scientists -->
        <div class="scene" id="scene-6">
            <div class="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1532094349884-543bc11b234d?w=1920&q=80')"></div>
            <div class="scene-content">
                <h2 class="scene-title">é©å‘½ã‚’èµ·ã“ã—ãŸç§‘å­¦è€…ãŸã¡</h2>
                <div class="character-cards">
                    <div class="character-card">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/Nikolaus_Kopernikus.jpg/440px-Nikolaus_Kopernikus.jpg" alt="Copernicus">
                        <h3>ã‚³ãƒšãƒ«ãƒ‹ã‚¯ã‚¹</h3>
                        <p>1473-1543<br>åœ°å‹•èª¬ã‚’ä½“ç³»åŒ–ã—ãŸ</p>
                    </div>
                    <div class="character-card">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/Justus_Sustermans_-_Portrait_of_Galileo_Galilei%2C_1636.jpg/440px-Justus_Sustermans_-_Portrait_of_Galileo_Galilei%2C_1636.jpg" alt="Galileo">
                        <h3>ã‚¬ãƒªãƒ¬ã‚ª</h3>
                        <p>1564-1642<br>æœ›é é¡ã§è¨¼æ‹ ã‚’ç™ºè¦‹</p>
                    </div>
                    <div class="character-card">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d4/Johannes_Kepler_1610.jpg/440px-Johannes_Kepler_1610.jpg" alt="Kepler">
                        <h3>ã‚±ãƒ—ãƒ©ãƒ¼</h3>
                        <p>1571-1630<br>æƒ‘æ˜Ÿé‹å‹•ã®æ³•å‰‡ã‚’ç™ºè¦‹</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scene 7: Proof Timeline -->
        <div class="scene" id="scene-7">
            <div class="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1419242902214-272b3f66ee7a?w=1920&q=80')"></div>
            <div class="scene-content">
                <h2 class="scene-title">è¨¼æ˜ã¸ã®é“ã®ã‚Š</h2>
                <p class="scene-subtitle">
                    ã™ãã«ã€Œã“ã‚ŒãŒè¨¼æ‹ ã ã€ã¨ã¯è¨€ãˆã¾ã›ã‚“ã§ã—ãŸã€‚<br><br>
                    è¦³å¯Ÿã€ç™ºæ˜ã€ç†è«–ã€æ³•å‰‡ã€‚<br>
                    ä½•äººã‚‚ã®äººãŒã€<br>
                    æ•°ç™¾å¹´ã‚’ã‹ã‘ã¦è¨¼æ˜ã—ãŸã®ã§ã™ã€‚
                </p>
            </div>
        </div>

        <!-- Scene 8: The Price -->
        <div class="scene danger" id="scene-8">
            <div class="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1509248961895-b4a7bd06e8c2?w=1920&q=80')"></div>
            <div class="scene-content">
                <h2 class="scene-title" style="color: var(--danger-red)">ä»£å„Ÿ</h2>
                <p class="scene-subtitle">
                    ã—ã‹ã—ã€çœŸå®Ÿã‚’èªã£ãŸè€…ãŸã¡ã¯<br>
                    å¤§ããªä»£å„Ÿã‚’æ‰•ã„ã¾ã—ãŸã€‚<br><br>
                    è€ƒãˆã‚’å¦å®šã•ã‚Œã€å±é™ºäººç‰©ã¨ã—ã¦æ‰±ã‚ã‚Œã€<br>
                    å‘½ã‚’è½ã¨ã—ãŸè€…ã•ãˆã„ã¾ã—ãŸã€‚
                </p>
            </div>
        </div>

        <!-- Scene 9: Bruno -->
        <div class="scene danger" id="scene-9">
            <div class="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1518709268805-4e9042af9f23?w=1920&q=80')"></div>
            <div class="scene-content">
                <h2 class="scene-title" style="color: var(--danger-red)">ã‚¸ãƒ§ãƒ«ãƒ€ãƒ¼ãƒãƒ»ãƒ–ãƒ«ãƒ¼ãƒ</h2>
                <p class="scene-subtitle">
                    1600å¹´ã€ç«åˆ‘ã«å‡¦ã•ã‚Œã¾ã—ãŸã€‚<br><br>
                    ã€Œæ­£ã—ã„ã‹ã©ã†ã‹ã€ã§ã¯ãªãã€<br>
                    ã€Œå¸¸è­˜ã«é€†ã‚‰ã£ãŸã‹ã©ã†ã‹ã€ã§<br>
                    è£ã‹ã‚ŒãŸã®ã§ã™ã€‚
                </p>
            </div>
        </div>

        <!-- Scene 10: Galileo's Trial -->
        <div class="scene" id="scene-10">
            <div class="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=1920&q=80')"></div>
            <div class="scene-content">
                <h2 class="scene-title">ã‚¬ãƒªãƒ¬ã‚ªã®ä¿¡å¿µ</h2>
                <p class="scene-quote">
                    ã€Œãã‚Œã§ã‚‚åœ°çƒã¯å‹•ãã€<br>
                    <span style="font-size: 0.7em; opacity: 0.7">â€• ã‚¬ãƒªãƒ¬ã‚ªãƒ»ã‚¬ãƒªãƒ¬ã‚¤ï¼ˆä¼ï¼‰</span>
                </p>
            </div>
        </div>

        <!-- Scene 11: Manga Chi -->
        <div class="scene" id="scene-11">
            <div class="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=1920&q=80')"></div>
            <div class="scene-content">
                <h2 class="scene-title">æ¼«ç”»ã€Œãƒã€‚ã€</h2>
                <p class="scene-subtitle">
                    çŸ¥ã‚‹ã“ã¨ã‚’ã‚ãã‚‰ã‚ãªã„å¿ƒã€‚<br>
                    çœŸå®Ÿã‚’è€ƒãˆã‚‹å‹‡æ°—ã€‚<br>
                    ä¸–ä»£ã‚’è¶…ãˆã¦å—ã‘ç¶™ãŒã‚Œã‚‹æ€æƒ³ã€‚<br><br>
                    ã“ã®æ¼«ç”»ã¯ã€ãã‚“ãªäººã€…ã®<br>
                    è‹¦ã—ã•ã¨æƒ…ç†±ã‚’æã„ã¦ã„ã¾ã™ã€‚
                </p>
            </div>
        </div>

        <!-- Scene 12: Lesson 1 -->
        <div class="scene" id="scene-12">
            <div class="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1504192010706-dd7f569ee2be?w=1920&q=80')"></div>
            <div class="scene-content">
                <h2 class="scene-title">å­¦ã³</h2>
                <p class="scene-subtitle">
                    ã‹ã¤ã¦åœ°å‹•èª¬ã¯<br>
                    éå¸¸è­˜ã§ã€å±é™ºã§ã€é–“é•ã„ã ã¨è¨€ã‚ã‚Œã¾ã—ãŸã€‚<br><br>
                    ä»Šã§ã¯æ•™ç§‘æ›¸ã«è¼‰ã‚‹ã€<br>
                    å½“ãŸã‚Šå‰ã®çŸ¥è­˜ã§ã™ã€‚
                </p>
            </div>
        </div>

        <!-- Scene 13: Lesson 2 -->
        <div class="scene" id="scene-13">
            <div class="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3?w=1920&q=80')"></div>
            <div class="scene-content">
                <p class="scene-quote">
                    ä»Šã®å¸¸è­˜ãŒã€æœ¬å½“ã«æ­£ã—ã„ã¨ã¯é™ã‚‰ãªã„ã€‚<br><br>
                    ä»Šã®éå¸¸è­˜ãŒã€<br>
                    æœªæ¥ã®å¸¸è­˜ã«ãªã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã€‚
                </p>
            </div>
        </div>

        <!-- Scene 14: Final Message -->
        <div class="scene" id="scene-14">
            <div class="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1464802686167-b939a6910659?w=1920&q=80')"></div>
            <div class="particles" id="particles-14"></div>
            <div class="scene-content">
                <h2 class="scene-title">è‡ªåˆ†ã§è€ƒãˆã€ç–‘å•ã‚’æŒã¤ã“ã¨</h2>
                <p class="scene-subtitle">
                    è‡ªåˆ†ã®ç›®ã§è¦‹ã¦ã€<br>
                    è‡ªåˆ†ã®é ­ã§è€ƒãˆã‚‹ã€‚<br><br>
                    ãã‚ŒãŒå¤§åˆ‡ãªã®ã§ã™ã€‚
                </p>
            </div>
        </div>

        <!-- Scene 15: Ending -->
        <div class="scene" id="scene-15">
            <div class="scene-bg" style="background-image: url('https://images.unsplash.com/photo-1462331940025-496dfbfc7564?w=1920&q=80')"></div>
            <div class="particles" id="particles-15"></div>
            <div class="scene-content">
                <h2 class="scene-title">ã”æ¸…è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸ</h2>
                <p class="scene-subtitle" style="margin-top: 40px;">
                    <span style="color: var(--gold);">ã€Œãã‚Œã§ã‚‚åœ°çƒã¯å‹•ãã€</span>
                </p>
            </div>
        </div>
    </div>

    <!-- Subtitle -->
    <div id="subtitle-container">
        <div id="subtitle"></div>
    </div>

    <!-- Controls -->
    <div id="controls">
        <button class="control-btn" id="play-btn">â–¶</button>
        <button class="control-btn" id="prev-btn">â®</button>
        <button class="control-btn" id="next-btn">â­</button>
        <div id="progress-container">
            <div id="progress-bar"></div>
        </div>
        <span id="time-display">00:00 / 00:00</span>
        <span id="scene-indicator">1 / 16</span>
        <div class="volume-control">
            <button class="control-btn" id="mute-btn">ğŸ”Š</button>
            <input type="range" id="volume-slider" min="0" max="100" value="80">
        </div>
    </div>

    <!-- Audio Elements (for pre-recorded narration) -->
    <div id="audio-container" style="display:none;"></div>

    <script>
        // Narration Script Data
        const scenes = [
            {
                id: 0,
                duration: 6000,
                narration: "å¤©å‹•èª¬ã¨åœ°å‹•èª¬ã€‚éå¸¸è­˜ã¯ã€ã„ã¤ã‹å¸¸è­˜ã«ãªã‚‹ã€‚",
                audioFile: "audio/scene00.mp3"
            },
            {
                id: 1,
                duration: 10000,
                narration: "çªç„¶ã§ã™ãŒã€ã‚ãªãŸã¯ã€Œãƒã€‚ã€ã¨ã„ã†æ¼«ç”»ã‚’çŸ¥ã£ã¦ã„ã¾ã™ã‹ï¼Ÿãƒã€‚ã¯å¼¾åœ§ã•ã‚ŒãªãŒã‚‰ã‚‚åœ°å‹•èª¬ã‚’ä¿¡ã˜ã¦ã€è¨¼æ˜ã—ã‚ˆã†ã¨ã—ãŸäººãŸã¡ã®ç‰©èªã§ã™ã€‚",
                audioFile: "audio/scene01.mp3"
            },
            {
                id: 2,
                duration: 12000,
                narration: "å¤©å‹•èª¬ã¨ã¯ã€åœ°çƒã‚’ä¸­å¿ƒã«å¤ªé™½ã‚„æ˜Ÿã€…ãŒå›ã£ã¦ã„ã‚‹ã¨ã„ã†è€ƒãˆã§ã™ã€‚ç›®ã§æ„Ÿã˜ãŸã‚‚ã®ã‚’ä¿¡ã˜ã‚‹ã¨ã€ã“ã®èª¬ã«è¡Œãç€ãã¾ã—ãŸã€‚ãã—ã¦é•·ã„é–“ã€æ¨©åŠ›ã‚„å®—æ•™ã«ã‚ˆã£ã¦æ­£ã—ã„ã¨ã•ã‚Œã¦ããŸã®ã§ã™ã€‚",
                audioFile: "audio/scene02.mp3"
            },
            {
                id: 3,
                duration: 12000,
                narration: "ãªãœå¤©å‹•èª¬ãŒä¿¡ã˜ã‚‰ã‚ŒãŸã®ã‹ã€‚åœ°é¢ã¯å‹•ã„ã¦ã„ã‚‹ã‚ˆã†ã«æ„Ÿã˜ãªã„ã€‚å¤ªé™½ã¯æ¯æ—¥æ±ã‹ã‚‰æ˜‡ã‚Šè¥¿ã«æ²ˆã‚€ã€‚æ˜Ÿã¯æ¯æ™©è¦å‰‡æ­£ã—ãå‹•ã„ã¦ã„ã‚‹ã€‚è¦‹ãŸã¾ã¾ã‚’ä¿¡ã˜ã‚Œã°ã€å¤©å‹•èª¬ã¯è‡ªç„¶ãªçµè«–ã§ã—ãŸã€‚",
                audioFile: "audio/scene03.mp3"
            },
            {
                id: 4,
                duration: 8000,
                narration: "å®Ÿã¯åœ°çƒãŒå‹•ã„ã¦ã„ã‚‹ã®ã§ã¯ãªã„ã‹ã€‚ãã†è€ƒãˆãŸäººãŸã¡ãŒç¾ã‚Œã¾ã—ãŸã€‚ã“ã‚ŒãŒåœ°å‹•èª¬ã§ã™ã€‚",
                audioFile: "audio/scene04.mp3"
            },
            {
                id: 5,
                duration: 12000,
                narration: "åœ°çƒãŒè‡ªè»¢ã™ã‚Œã°æ˜¼ã¨å¤œãŒèª¬æ˜ã§ãã‚‹ã€‚åœ°çƒãŒå…¬è»¢ã™ã‚Œã°å­£ç¯€ã®å¤‰åŒ–ã‚‚èª¬æ˜ã§ãã‚‹ã€‚ã—ã‹ã—ã“ã®è€ƒãˆã¯å½“æ™‚ã€ã¨ã‚“ã§ã‚‚ãªã„éå¸¸è­˜ã§ã—ãŸã€‚",
                audioFile: "audio/scene05.mp3"
            },
            {
                id: 6,
                duration: 12000,
                narration: "é©å‘½ã‚’èµ·ã“ã—ãŸç§‘å­¦è€…ãŸã¡ã€‚ã‚³ãƒšãƒ«ãƒ‹ã‚¯ã‚¹ã¯åœ°å‹•èª¬ã‚’ä½“ç³»åŒ–ã—ã€ã‚¬ãƒªãƒ¬ã‚ªã¯æœ›é é¡ã§è¨¼æ‹ ã‚’ç™ºè¦‹ã—ã€ã‚±ãƒ—ãƒ©ãƒ¼ã¯æƒ‘æ˜Ÿé‹å‹•ã®æ³•å‰‡ã‚’ç™ºè¦‹ã—ã¾ã—ãŸã€‚",
                audioFile: "audio/scene06.mp3"
            },
            {
                id: 7,
                duration: 10000,
                narration: "ã™ãã«ã€Œã“ã‚ŒãŒè¨¼æ‹ ã ã€ã¨ã¯è¨€ãˆã¾ã›ã‚“ã§ã—ãŸã€‚è¦³å¯Ÿã€ç™ºæ˜ã€ç†è«–ã€æ³•å‰‡ã€‚ä½•äººã‚‚ã®äººãŒã€æ•°ç™¾å¹´ã‚’ã‹ã‘ã¦è¨¼æ˜ã—ãŸã®ã§ã™ã€‚",
                audioFile: "audio/scene07.mp3"
            },
            {
                id: 8,
                duration: 10000,
                narration: "ã—ã‹ã—ã€çœŸå®Ÿã‚’èªã£ãŸè€…ãŸã¡ã¯å¤§ããªä»£å„Ÿã‚’æ‰•ã„ã¾ã—ãŸã€‚è€ƒãˆã‚’å¦å®šã•ã‚Œã€å±é™ºäººç‰©ã¨ã—ã¦æ‰±ã‚ã‚Œã€å‘½ã‚’è½ã¨ã—ãŸè€…ã•ãˆã„ã¾ã—ãŸã€‚",
                audioFile: "audio/scene08.mp3"
            },
            {
                id: 9,
                duration: 10000,
                narration: "ã‚¸ãƒ§ãƒ«ãƒ€ãƒ¼ãƒãƒ»ãƒ–ãƒ«ãƒ¼ãƒã¯1600å¹´ã€ç«åˆ‘ã«å‡¦ã•ã‚Œã¾ã—ãŸã€‚æ­£ã—ã„ã‹ã©ã†ã‹ã§ã¯ãªãã€å¸¸è­˜ã«é€†ã‚‰ã£ãŸã‹ã©ã†ã‹ã§è£ã‹ã‚ŒãŸã®ã§ã™ã€‚",
                audioFile: "audio/scene09.mp3"
            },
            {
                id: 10,
                duration: 8000,
                narration: "ãã‚Œã§ã‚‚åœ°çƒã¯å‹•ãã€‚ã‚¬ãƒªãƒ¬ã‚ªã¯è‡ªèº«ã®ä¿¡å¿µã‚’æ­»ã¬å¯¸å‰ã¾ã§è¨¼æ˜ã—ã‚ˆã†ã¨ã—ã¾ã—ãŸã€‚",
                audioFile: "audio/scene10.mp3"
            },
            {
                id: 11,
                duration: 10000,
                narration: "æ¼«ç”»ã€Œãƒã€‚ã€ã¯ã€çŸ¥ã‚‹ã“ã¨ã‚’ã‚ãã‚‰ã‚ãªã„å¿ƒã€çœŸå®Ÿã‚’è€ƒãˆã‚‹å‹‡æ°—ã€ä¸–ä»£ã‚’è¶…ãˆã¦å—ã‘ç¶™ãŒã‚Œã‚‹æ€æƒ³ã€‚ãã‚“ãªäººã€…ã®è‹¦ã—ã•ã¨æƒ…ç†±ã‚’æã„ã¦ã„ã¾ã™ã€‚",
                audioFile: "audio/scene11.mp3"
            },
            {
                id: 12,
                duration: 10000,
                narration: "ã‹ã¤ã¦åœ°å‹•èª¬ã¯ã€éå¸¸è­˜ã§å±é™ºã§é–“é•ã„ã ã¨è¨€ã‚ã‚Œã¾ã—ãŸã€‚ä»Šã§ã¯æ•™ç§‘æ›¸ã«è¼‰ã‚‹ã€å½“ãŸã‚Šå‰ã®çŸ¥è­˜ã§ã™ã€‚",
                audioFile: "audio/scene12.mp3"
            },
            {
                id: 13,
                duration: 10000,
                narration: "ä»Šã®å¸¸è­˜ãŒã€æœ¬å½“ã«æ­£ã—ã„ã¨ã¯é™ã‚‰ãªã„ã€‚ä»Šã®éå¸¸è­˜ãŒã€æœªæ¥ã®å¸¸è­˜ã«ãªã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã€‚",
                audioFile: "audio/scene13.mp3"
            },
            {
                id: 14,
                duration: 8000,
                narration: "è‡ªåˆ†ã®ç›®ã§è¦‹ã¦ã€è‡ªåˆ†ã®é ­ã§è€ƒãˆã‚‹ã€‚ãã‚ŒãŒå¤§åˆ‡ãªã®ã§ã™ã€‚",
                audioFile: "audio/scene14.mp3"
            },
            {
                id: 15,
                duration: 8000,
                narration: "ã”æ¸…è´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚ãã‚Œã§ã‚‚åœ°çƒã¯å‹•ãã€‚",
                audioFile: "audio/scene15.mp3"
            }
        ];

        // State
        let currentScene = 0;
        let isPlaying = false;
        let sceneTimer = null;
        let totalDuration = scenes.reduce((sum, s) => sum + s.duration, 0);
        let speechSynth = window.speechSynthesis;
        let selectedVoice = null;
        let isMuted = false;
        let volume = 0.8;
        let audioMode = 'file'; // 'file', 'tts', 'silent'
        let audioElements = {};
        let audioFilesAvailable = false;
        let currentAudio = null;

        // DOM Elements
        const startScreen = document.getElementById('start-screen');
        const startBtn = document.getElementById('start-btn');
        const audioStatus = document.getElementById('audio-status');
        const playBtn = document.getElementById('play-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progressBar = document.getElementById('progress-bar');
        const progressContainer = document.getElementById('progress-container');
        const timeDisplay = document.getElementById('time-display');
        const sceneIndicator = document.getElementById('scene-indicator');
        const subtitleEl = document.getElementById('subtitle');
        const muteBtn = document.getElementById('mute-btn');
        const volumeSlider = document.getElementById('volume-slider');
        const transitionEl = document.getElementById('transition');
        const loadingAudio = document.getElementById('loading-audio');
        const modeButtons = document.querySelectorAll('.mode-btn');

        // Check if audio files exist
        async function checkAudioFiles() {
            let availableCount = 0;
            const audioContainer = document.getElementById('audio-container');

            for (let i = 0; i < scenes.length; i++) {
                const scene = scenes[i];
                try {
                    const response = await fetch(scene.audioFile, { method: 'HEAD' });
                    if (response.ok) {
                        availableCount++;
                        // Pre-create audio element
                        const audio = new Audio(scene.audioFile);
                        audio.preload = 'auto';
                        audioElements[i] = audio;
                    }
                } catch (e) {
                    // File not available
                }
            }

            audioFilesAvailable = availableCount > 0;

            if (availableCount === scenes.length) {
                audioStatus.textContent = `âœ“ å…¨${scenes.length}å€‹ã®éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ãŒåˆ©ç”¨å¯èƒ½ã§ã™`;
                audioStatus.className = 'audio-status success';
            } else if (availableCount > 0) {
                audioStatus.textContent = `â–³ ${availableCount}/${scenes.length} ã®éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ`;
                audioStatus.className = 'audio-status warning';
            } else {
                audioStatus.innerHTML = `
                    éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚<br>
                    <small>audio/ ãƒ•ã‚©ãƒ«ãƒ€ã« scene00.mp3 ã€œ scene15.mp3 ã‚’é…ç½®ã™ã‚‹ã‹ã€<br>
                    ã€Œãƒ–ãƒ©ã‚¦ã‚¶TTSã€ã¾ãŸã¯ã€Œå­—å¹•ã®ã¿ã€ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</small>
                `;
                audioStatus.className = 'audio-status warning';
                // Auto-select TTS mode if no audio files
                document.querySelector('[data-mode="tts"]').click();
            }
        }

        // Initialize voices for TTS mode
        function loadVoices() {
            const voices = speechSynth.getVoices();
            const japaneseVoices = voices.filter(v => v.lang.includes('ja'));
            if (japaneseVoices.length > 0) {
                selectedVoice = japaneseVoices[0];
            }
        }

        speechSynth.onvoiceschanged = loadVoices;
        loadVoices();

        // Mode selection
        modeButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                modeButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                audioMode = btn.dataset.mode;
            });
        });

        // Create particles
        function createParticles(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;

            for (let i = 0; i < 20; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 8 + 's';
                particle.style.animationDuration = (Math.random() * 4 + 6) + 's';
                container.appendChild(particle);
            }
        }

        createParticles('particles-0');
        createParticles('particles-14');
        createParticles('particles-15');

        // Format time
        function formatTime(ms) {
            const totalSeconds = Math.floor(ms / 1000);
            const mins = Math.floor(totalSeconds / 60);
            const secs = totalSeconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        // Update UI
        function updateUI() {
            const currentElapsed = scenes.slice(0, currentScene).reduce((sum, s) => sum + s.duration, 0);
            progressBar.style.width = (currentElapsed / totalDuration * 100) + '%';
            timeDisplay.textContent = `${formatTime(currentElapsed)} / ${formatTime(totalDuration)}`;
            sceneIndicator.textContent = `${currentScene + 1} / ${scenes.length}`;
            playBtn.textContent = isPlaying ? 'â¸' : 'â–¶';
        }

        // Stop all audio
        function stopAllAudio() {
            // Stop TTS
            speechSynth.cancel();

            // Stop current audio file
            if (currentAudio) {
                currentAudio.pause();
                currentAudio.currentTime = 0;
                currentAudio = null;
            }
        }

        // Play narration
        function playNarration(sceneIndex) {
            stopAllAudio();

            if (isMuted || audioMode === 'silent') return;

            const scene = scenes[sceneIndex];

            if (audioMode === 'file' && audioElements[sceneIndex]) {
                // Play audio file
                currentAudio = audioElements[sceneIndex];
                currentAudio.volume = volume;
                currentAudio.currentTime = 0;
                currentAudio.play().catch(e => {
                    console.log('Audio play failed, falling back to TTS');
                    playTTS(scene.narration);
                });
            } else if (audioMode === 'tts') {
                playTTS(scene.narration);
            }
        }

        // Play TTS
        function playTTS(text) {
            if (!text || isMuted) return;

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.voice = selectedVoice;
            utterance.lang = 'ja-JP';
            utterance.rate = 0.9;
            utterance.pitch = 1.0;
            utterance.volume = volume;

            speechSynth.speak(utterance);
        }

        // Show subtitle
        function showSubtitle(text) {
            subtitleEl.textContent = text;
            subtitleEl.classList.add('show');
        }

        function hideSubtitle() {
            subtitleEl.classList.remove('show');
        }

        // Go to scene
        function goToScene(index, withTransition = true) {
            if (index < 0 || index >= scenes.length) return;

            clearTimeout(sceneTimer);
            stopAllAudio();

            const doTransition = () => {
                // Hide all scenes
                document.querySelectorAll('.scene').forEach(s => {
                    s.classList.remove('active');
                });

                // Show target scene
                currentScene = index;
                const targetScene = document.getElementById(`scene-${index}`);
                if (targetScene) {
                    targetScene.classList.add('active');
                }

                updateUI();

                // Narration and subtitle
                const scene = scenes[index];
                showSubtitle(scene.narration);
                playNarration(index);

                // Auto advance if playing
                if (isPlaying && currentScene < scenes.length - 1) {
                    // If using audio file, sync with audio duration
                    let duration = scene.duration;

                    if (audioMode === 'file' && audioElements[index]) {
                        const audio = audioElements[index];
                        if (audio.duration && !isNaN(audio.duration)) {
                            duration = Math.max(audio.duration * 1000 + 1000, scene.duration);
                        }
                    }

                    sceneTimer = setTimeout(() => {
                        goToScene(currentScene + 1);
                    }, duration);
                } else if (currentScene === scenes.length - 1) {
                    // End of video
                    setTimeout(() => {
                        isPlaying = false;
                        updateUI();
                    }, scene.duration);
                }

                // Remove transition
                if (withTransition) {
                    setTimeout(() => {
                        transitionEl.classList.remove('active');
                    }, 300);
                }
            };

            if (withTransition && isPlaying) {
                transitionEl.classList.add('active');
                setTimeout(doTransition, 500);
            } else {
                doTransition();
            }
        }

        // Play/Pause
        function togglePlay() {
            isPlaying = !isPlaying;

            if (isPlaying) {
                goToScene(currentScene, false);
            } else {
                clearTimeout(sceneTimer);
                stopAllAudio();
            }

            updateUI();
        }

        // Event Listeners
        startBtn.addEventListener('click', () => {
            startScreen.classList.add('hidden');
            isPlaying = true;
            goToScene(0, false);
        });

        playBtn.addEventListener('click', togglePlay);

        prevBtn.addEventListener('click', () => {
            goToScene(currentScene - 1);
        });

        nextBtn.addEventListener('click', () => {
            goToScene(currentScene + 1);
        });

        progressContainer.addEventListener('click', (e) => {
            const rect = progressContainer.getBoundingClientRect();
            const percent = (e.clientX - rect.left) / rect.width;
            let targetTime = percent * totalDuration;
            let accumulated = 0;

            for (let i = 0; i < scenes.length; i++) {
                accumulated += scenes[i].duration;
                if (accumulated >= targetTime) {
                    goToScene(i);
                    break;
                }
            }
        });

        muteBtn.addEventListener('click', () => {
            isMuted = !isMuted;
            muteBtn.textContent = isMuted ? 'ğŸ”‡' : 'ğŸ”Š';
            if (isMuted) {
                stopAllAudio();
            }
        });

        volumeSlider.addEventListener('input', () => {
            volume = volumeSlider.value / 100;
            if (currentAudio) {
                currentAudio.volume = volume;
            }
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (startScreen.classList.contains('hidden')) {
                switch(e.code) {
                    case 'Space':
                        e.preventDefault();
                        togglePlay();
                        break;
                    case 'ArrowLeft':
                        goToScene(currentScene - 1);
                        break;
                    case 'ArrowRight':
                        goToScene(currentScene + 1);
                        break;
                    case 'KeyM':
                        muteBtn.click();
                        break;
                }
            } else if (e.code === 'Space' || e.code === 'Enter') {
                startBtn.click();
            }
        });

        // Initialize
        checkAudioFiles();
        updateUI();
    </script>
</body>
</html>
